<!doctype html>
<html lang="en-US">

<head>
    <meta charset="UTF-8">
    <title>Casa Inteligente</title>
     <link rel="stylesheet" href="../css/comum.css">
     <link rel="stylesheet" href="../css/estado.css">
     <link rel="stylesheet" href="../fa/css/all.css">
</head>

<body>
    <div id="app">
        <div id="top-bar"></div>
        <nav id="breadcrumb"></nav>
        <header>
            <div class="title-wrapper">
                <a href="../index.html">
                    <i class="fa fa-chevron-circle-left goBack"></i>
                </a>
                <div id="title">Estados da Casa</div>
            </div>
        </header>
        <main>

            <form action="">
                <label for="locals">Seleciona o local:&nbsp;</label>
                <select id="locals" onchange="changeLocal(null)">
                    <option name="local" value="Casa de Banho" selected>Casa de Banho</option>
                    <option name="local" value="Cozinha">Cozinha</option>
                    <option name="local" value="Entrada">Entrada</option>
                    <option name="local" value="Quarto 1">Quarto 1</option>
                    <option name="local" value="Quarto 2">Quarto 2</option>
                    <option name="local" value="Sala">Sala</option>
                </select>
            </form>

            <table class="box lista">
                <tr>
                    <th colspan="3" class="local">
                        Casa de Banho
                    </th>
                </tr>
                <tr>
                    <td>Velocidade da Rede :</td>
                    <td class="danger">20 Mbps</td>
                    <td></td>                   
                </tr>
                <tr>
                    <td>Temperatura :</td>
                    <td class="ok">24 ºC</td>
                    <td></td>                   
                </tr>
                <tr>
                    <td>Luminosidade :</td>
                    <td class="ok">70 %</td>
                    <td></td>                   
                </tr>
                <tr>
                    <td>Humidade :</td>
                    <td class="danger">80 %</td>
                    <td></td>
                </tr>
                <tr>
                    <td>Nível de O<sub>2</sub> :</td>
                    <td class="ok">22.2 %</td>
                    <td></td>
                </tr>
                <tr>
                    <td>Nível de CO<sub>2</sub> :</td>
                    <td class="ok">0.20 %</td>
                    <td></td>
                </tr>
            </table>

<!--             <div class="lista box">
                <h2>SALA</h2>
                <h4 id="lista1-1">T: 23.0ºC</h4>
                <h4 id="lista1-2">O2: 89%<br> OK</h4>
                <h4 id="lista1-3">CO2: 5%<br> OK</h4>
                <div id = "temperatura"><input id="t" step="0.1" type="number" value="23.0" min="10" max="30">
                <button class="favorite styled" type="button"> Alterar</button></div>
            </div>
            <div class="lista box">
                <h2>COZINHA</h2>
                <h4 id="lista2-1">T: 21.5ºC</h4>
                <h4 id="lista2-2">O2: 93%<br> OK</h4>
                <h4 id="lista2-3">CO2: 3% <br>OK</h4>
                <div id = "temperatura"><input id="t" step="0.1" type="number" value="21.5" min="10" max="30">
                <button class="favorite styled" type="button"> Alterar</button></div>
            </div>
            <div class="lista box">
                <h2>QUARTO PAIS</h2>
                <h4 id="lista3-1">T: 24.5ºC</h4>
                <h4 id="lista3-2">O2: 90% <br>OK</h4>
                <h4 id="lista3-3">CO2: 6%<br> OK</h4>
                <div id = "temperatura"><input id="t" step="0.1" type="number" value="24.5" min="10" max="30">
                <button class="favorite styled" type="button"> Alterar</button></div>
            </div>
            <div class="lista box">
                <h2>QUARTO JOSÉ</h2>
                <h4 id="lista4-1">T: 23.5ºC</h4>
                <h4 id="lista4-2">O2: 72% <br>OK</h4>
                <h4 id="lista4-3">CO2: 5%<br> OK</h4>
                <div id = "temperatura"><input id="t" step="0.1" type="number" value="23.5" min="10" max="30">
                <button class="favorite styled" type="button"> Alterar</button></div>
            </div>
            <div class="lista box">
                <h2>VARANDA</h2>
                <h4 id="lista5-1">T: 28.3ºC</h4>
                <h4 id="lista5-2">O2: 90% <br>OK</h4>
                <h4 id="lista5-3">CO2: 7%<br> OK</h4>
                <div id = "temperatura"><input id="t" step="0.1" type="number" value="28.3" min="10" max="30">
                <button class="favorite styled" type="button"> Alterar</button></div>
            </div> -->
        </main>
    </div>

    <form name="activateAlert" action="./alerta_intruso.html"></form>
    <script src="../js/alerta_comum.js"></script>

    <script>
        const statistics = [
             {local: "Casa de Banho", speed: "20 Kbps", temp: "24 ºC", ilum: "70 %", hum: "80 %", oxyg: "22.2 %", carbon: "0.20 %",
             classList: ["danger", "ok", "ok","danger", "ok", "ok"]},
             {local: "Cozinha", speed: "150 Mbps", temp: "21 ºC", ilum: "89 %", hum: "65 %", oxyg: "15.6 %", carbon: "1.56 %",
             classList: ["ok", "ok", "ok","danger", "danger", "danger"]},
             {local: "Entrada", speed: "50 Kbps", temp: "23 ºC", ilum: "60 %", hum: "55 %", oxyg: "21.0 %", carbon: "0.04 %",
             classList: ["danger", "ok", "ok", "ok", "ok", "ok"]},
             {local: "Quarto 1", speed: "120 Mbps", temp: "28 ºC", ilum: "45 %", hum: "30 %", oxyg: "20.1 %", carbon: "1.11 %",
             classList: ["ok", "ok", "ok", "danger", "ok", "danger"]},
             {local: "Quarto 2", speed: "134 Mbps", temp: "26 ºC", ilum: "88 %", hum: "45 %", oxyg: "25.5 %", carbon: "0.05 %",
             classList: ["ok", "ok", "ok","ok", "danger", "ok"]},
             {local: "Sala", speed: "113 Mbps", temp: "23 ºC", ilum: "90 %", hum: "50 %", oxyg: "20.8 %", carbon: "0.10 %",
             classList: ["ok", "ok", "ok","ok", "ok", "ok"]},
        ];

        var index = JSON.parse(localStorage.getItem("local"));
        if (index != null) {
            document.getElementsByTagName("option")[index].selected = true;
            changeLocal(index);
        } else {
            changeLocal(0);
        }

        function changeLocal(index) {
            var options = document.getElementsByTagName("option");
            var i = 0;
            if (index != null) {
                i = index;
            } else {
                for (; i < options.length && !options[i].selected; i++) {}
            }

            var trs = document.getElementsByClassName("lista")[0].getElementsByTagName("tr");
            trs[0].children[0].innerHTML = statistics[i].local;
            var currElem = trs[1].children[1];
            currElem.innerHTML = statistics[i].speed;
            if (!currElem.classList.contains(statistics[i].classList[0])) {
                currElem.classList.replace(currElem.classList[0], statistics[i].classList[0]);
            }

            currElem = trs[2].children[1];
            var savedTemp = JSON.parse(localStorage.getItem("ac_temp"));
            if (savedTemp != null && savedTemp[i] != null) {
                currElem.innerHTML = savedTemp[i] + " ºC";
            } else {
                currElem.innerHTML = statistics[i].temp;
            }
            if (!currElem.classList.contains(statistics[i].classList[1])) {
                currElem.classList.replace(currElem.classList[0], statistics[i].classList[1]);
            }

            currElem = trs[3].children[1];
            currElem.innerHTML = statistics[i].ilum;
            if (!currElem.classList.contains(statistics[i].classList[2])) {
                currElem.classList.replace(currElem.classList[0], statistics[i].classList[2]);
            }

            currElem = trs[4].children[1];
            currElem.innerHTML = statistics[i].hum;
            if (!currElem.classList.contains(statistics[i].classList[3])) {
                currElem.classList.replace(currElem.classList[0], statistics[i].classList[3]);
            }

            currElem = trs[5].children[1];
            currElem.innerHTML = statistics[i].oxyg;
            if (!currElem.classList.contains(statistics[i].classList[4])) {
                currElem.classList.replace(currElem.classList[0], statistics[i].classList[4]);
            }

            currElem = trs[6].children[1];
            currElem.innerHTML = statistics[i].carbon;
            if (!currElem.classList.contains(statistics[i].classList[5])) {
                currElem.classList.replace(currElem.classList[0], statistics[i].classList[5]);
            }

            localStorage.setItem("local", i);
        }
    </script>
</body>

</html>